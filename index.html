<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Alerta Temprana - Crecer Más</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <header>
        <h1>Crecer Más - Analítica Predictiva</h1>
        <button id="logoutBtn" style="display: none;" onclick="logout()">Cerrar Sesión</button>
    </header>

    <main>
        <section id="login-view" class="view active">
            <div class="login-box">
                <h2>Iniciar Sesión</h2>
                <input type="text" id="rutInput" placeholder="Ingrese su RUT (Ej: 11.111.111-1)">
                <button onclick="login()">Ingresar</button>
                <p id="loginError" class="error"></p>
            </div>
        </section>

        <section id="student-view" class="view">
            <h2>Mi Perfil Académico</h2>
            <div class="card">
                <h3 id="studentName"></h3>
                <p><strong>RUT:</strong> <span id="studentRut"></span></p>
                
                <div class="stats-container">
                    <div class="stat-box">
                        <h4>Promedio Notas</h4>
                        <p class="big-number" id="studentGrade"></p>
                    </div>
                    <div class="stat-box">
                        <h4>Asistencia</h4>
                        <p class="big-number" id="studentAttendance"></p>
                    </div>
                </div>

                <div id="attendanceWarning" class="alert-box hidden">
                    <p>⚠️ Cuidado con la asistencia. Si necesitas hablarlo, comunicarse a este contacto <strong>+56 9 XXX XXX XXX</strong> o <strong>comunicaciones@crecermas.cl</strong></p>
                </div>
            </div>
        </section>

        <section id="admin-view" class="view">
            <h2>Dashboard General</h2>
            
            <div class="controls">
                <button onclick="updateChart('grades')">Ver Promedio Notas</button>
                <button onclick="updateChart('attendance')">Ver Promedio Asistencia</button>
            </div>

            <div class="chart-container">
                <canvas id="generalChart"></canvas>
            </div>

            <h3>Listado de Estudiantes</h3>
            <table>
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>RUT</th>
                        <th>Asistencia</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody id="studentsTableBody">
                    </tbody>
            </table>
        </section>

        <section id="detail-view" class="view">
            <button onclick="showView('admin-view')" class="back-btn">← Volver al Dashboard</button>
            <h2>Detalle del Estudiante</h2>
            <div class="card">
                <h3 id="detailName"></h3>
                <p><strong>RUT:</strong> <span id="detailRut"></span></p>
                <p><strong>Celular:</strong> <span id="detailPhone"></span></p>
                <hr>
                <div class="stats-container">
                    <div class="stat-box">
                        <h4>Promedio Notas</h4>
                        <p class="big-number" id="detailGrade"></p>
                    </div>
                    <div class="stat-box">
                        <h4>Asistencia</h4>
                        <p class="big-number" id="detailAttendance"></p>
                    </div>
                </div>
                <div class="chart-container-small">
                    <canvas id="studentChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>